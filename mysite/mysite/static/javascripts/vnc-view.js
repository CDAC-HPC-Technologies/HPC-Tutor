"use strict";var rfb;var loaded=false;var connected=false;var retries=0;var retryConnected;var resized;var resizeTimeout;window.onscriptsload=function(){loaded=true};function readQueryVariable(name,defaultValue){var re=new RegExp(".*[?&]"+name+"=([^&#]*)"),match=document.location.href.match(re);if(typeof defaultValue==="undefined"){defaultValue=null}if(match){return decodeURIComponent(match[1])}return defaultValue}window.credentialsAreRequired=function(e){console.log("credentialsAreRequired")};window.onresize=function(){applyResizeMode()};window.onresize=function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){applyResizeMode()},500)};var applyResizeMode=function(){if(!rfb)return};var getPosition=function(){function getStyle(obj,styleProp){if(obj.currentStyle){var y=obj.currentStyle[styleProp]}else if(window.getComputedStyle)var y=window.getComputedStyle(obj,null)[styleProp];return y}function scrollDist(){var myScrollTop=0,myScrollLeft=0;var html=document.getElementsByTagName("html")[0];if(html.scrollTop&&document.documentElement.scrollTop){myScrollTop=html.scrollTop}else if(html.scrollTop||document.documentElement.scrollTop){myScrollTop=html.scrollTop+document.documentElement.scrollTop}else if(document.body.scrollTop){myScrollTop=document.body.scrollTop}else{myScrollTop=0}if(html.scrollLeft&&document.documentElement.scrollLeft){myScrollLeft=html.scrollLeft}else if(html.scrollLeft||document.documentElement.scrollLeft){myScrollLeft=html.scrollLeft+document.documentElement.scrollLeft}else if(document.body.scrollLeft){myScrollLeft=document.body.scrollLeft}else{myScrollLeft=0}return[myScrollLeft,myScrollTop]}return function(obj){var curleft=0,curtop=0,scr=obj,fixed=false;while((scr=scr.parentNode)&&scr!=document.body){curleft-=scr.scrollLeft||0;curtop-=scr.scrollTop||0;if(getStyle(scr,"position")=="fixed"){fixed=true}}if(fixed&&!window.opera){var scrDist=scrollDist();curleft+=scrDist[0];curtop+=scrDist[1]}do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent);return{x:curleft,y:curtop}}}();var screenSize=function(){var screen=$("#novnc-display");var pos=getPosition(screen[0]);var w=pos.x;var h=pos.y;if(isNaN(w)||isNaN(h)){return false}else{return{w:w,h:h}}};var connectedToServer=function(){console.log("Connected")};var clipboardReceive=function(){console.log("clipboardReceive")};var disconnectedFromServer=function(){console.log("disconnectFinished");window.RetryVncConnection()};window.clipboardReceive=clipboardReceive;window.disconnectedFromServer=disconnectedFromServer;window.connectedToServer=connectedToServer;var VncConnection=function(){if(connected)return;try{if(window.course.view.project.hosts===undefined)throw"Hosts is empty";var vncHost=0;var host,port,password,path,token;var host=window.course.view.project.katacodaHost;host=window.course.view.project.hosts[vncHost].subdomain+"-"+host+".connections.katacoda.com";path="websockify";console.log("Desktop Connecting...");var url;if(window.location.protocol==="https:"){url="wss"}else{url="ws"}url+="://"+host;url+="/"+path;rfb=new RFB(document.getElementById("noVNC_canvas"),url,{credentials:{password:password}});rfb.addEventListener("connect",connectedToServer);rfb.addEventListener("disconnect",disconnectedFromServer);rfb.addEventListener("credentialsrequired",credentialsAreRequired);rfb.viewOnly=false;rfb.viewClip=false;rfb.scaleViewport=true;rfb.resizeSession=true}catch(exc){retries=retries+1;if(retries<5){console.log("Desktop Retrying",retries);setTimeout(VncConnection,500)}else{console.log("Desktop Given up")}}connected=true;clearInterval(retryConnected)};window.VncConnection=VncConnection;window.RetryVncConnection=function(){try{window.connected=false;retryConnected=setInterval(function(){window.VncConnection()},1e3)}catch(e){console.log("HERE")}};